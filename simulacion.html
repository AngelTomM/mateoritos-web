<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <link rel="stylesheet" href="globals.css" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="ventana">
  <img class="chatgpt-image-oct" src="FondoEspacio.png" />
      <div class="rectangle"></div>
      <p class="SIMULACION-DE">SIMULACION DE TRAYECTORIAS: <br />COMPORTAMIENTO ORBITAL DE ASTEROIDES</p>
      <div class="div" id="left-panel">
        <div class="left-content" style="position:relative;padding:20px;display:flex;flex-direction:column;gap:12px;">
          <!-- Slides moved here -->
          <div id="slides-panel" style="display:flex;flex-direction:column;gap:8px;">
            <button class="slide-btn" data-slide="1">Slide 1</button>
            <button class="slide-btn" data-slide="2">Slide 2</button>
            <button class="slide-btn" data-slide="3">Slide 3</button>
          </div>
          <!-- Controls: native HTML ranges to replace p5 sliders -->
          <div id="controls" style="display:flex;flex-direction:column;gap:8px; margin-top:8px;">
            <label style="color:white; font-weight:700; display:flex; align-items:center; gap:8px;">a (UA)
              <input id="a-range" type="range" min="0.00001" max="1.6" step="0.000001" value="1.6" style="width:100%;">
              <span id="a-val" style="min-width:70px;text-align:right;color:#fff;font-weight:700;">1.600000</span>
            </label>
            <label style="color:white; font-weight:700; display:flex; align-items:center; gap:8px;">e (excentricidad)
              <input id="e-range" type="range" min="0" max="0.99" step="0.001" value="0.8611" style="width:100%;">
              <span id="e-val" style="min-width:60px;text-align:right;color:#fff;font-weight:700;">0.861</span>
            </label>
            <label style="color:white; font-weight:700; display:flex; align-items:center; gap:8px;">i (Â°)
              <input id="i-range" type="range" min="0" max="45" step="0.01" value="4.10" style="width:100%;">
              <span id="i-val" style="min-width:50px;text-align:right;color:#fff;font-weight:700;">4.10</span>
            </label>
          </div>
          <!-- Info values (populated by the sketch) -->
          <div id="info-values"></div>
          <!-- Danger banner will be placed below the slides/info by the sketch -->
          <div id="peligro-div"></div>
          <a href="index.html" class="back-btn" style="margin-top:12px;display:inline-block;text-decoration:none;">
            <button style="padding:10px 14px;border-radius:8px;border:none;background:#fc3d21;color:white;cursor:pointer;">Volver al inicio</button>
          </a>
        </div>
      </div>
      <div class="rectangle-2">
        <!-- Container where the p5 canvas will be placed so the simulation appears inside this right card -->
        <div id="simulacion-container" style="width:100%;height:100%;position:relative;"></div>
      </div>
    </div>

    <!-- Load p5 library from CDN first, then load the actual sketch (sketch.js) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.10/p5.min.js"></script>
    <script>
      // expose a global currentSlide and wire up the slide buttons (now in left panel)
      window.currentSlide = 1;
      document.addEventListener('DOMContentLoaded', () => {
        const panel = document.getElementById('slides-panel');
        if (!panel) return;
        panel.querySelectorAll('.slide-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            const s = Number(btn.getAttribute('data-slide')) || 1;
            window.currentSlide = s;
            // visual feedback
            panel.querySelectorAll('.slide-btn').forEach(b => b.style.opacity = '0.6');
            btn.style.opacity = '1';
          });
        });
        // set initial opacity
        panel.querySelectorAll('.slide-btn').forEach(b => b.style.opacity = '0.6');
        const first = panel.querySelector('.slide-btn[data-slide="1"]');
        if (first) first.style.opacity = '1';
      });
    </script>
    <script src="sketch.js"></script>
    <script>
      // live value update for ranges
      document.addEventListener('DOMContentLoaded', () => {
        const aRange = document.getElementById('a-range');
        const eRange = document.getElementById('e-range');
        const iRange = document.getElementById('i-range');
        const aVal = document.getElementById('a-val');
        const eVal = document.getElementById('e-val');
        const iVal = document.getElementById('i-val');
        function updateA() { if (aVal && aRange) aVal.textContent = parseFloat(aRange.value).toFixed(6); }
        function updateE() { if (eVal && eRange) eVal.textContent = parseFloat(eRange.value).toFixed(3); }
        function updateI() { if (iVal && iRange) iVal.textContent = parseFloat(iRange.value).toFixed(2); }
        if (aRange) aRange.addEventListener('input', updateA); updateA();
        if (eRange) eRange.addEventListener('input', updateE); updateE();
        if (iRange) iRange.addEventListener('input', updateI); updateI();
      });
    </script>
  </body>
</html>