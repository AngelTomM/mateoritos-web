<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Equipo Mateoritos - Sobre Nosotros" />
    <title>SOBRE NOSOTROS - Equipo Mateoritos</title>
    <link rel="stylesheet" href="style_3.css" />
  </head>
  <body>
    <div class="background"></div>
    <div class="meteoro-top"></div>
    <div class="meteoro-bottom"></div>

    <div class="rectangle"></div>

  <h1 class="titulo" id="page-title" data-i18n="page3.title">Sobre Nosotros</h1>
  <div class="team" id="team-name" data-i18n="page3.team_name">Equipo Mateorito</div>
  <div class="descripcion" id="team-desc" data-i18n="page3.team_description">Un equipo conformado por estudiantes de Ingeniería Mecatrónica de la Universidad Nacional de San Luis que participa en el NASA Space Apps Challenge</div>

    <!-- member ellipses (background images) -->
    <div class="ellipse mica" data-member="mica"></div>
    <div class="ellipse tomas" data-member="tomas"></div>
    <div class="ellipse joaquin" data-member="joaquin"></div>
    <div class="ellipse ignacio" data-member="ignacio"></div>
    <div class="ellipse simon" data-member="simon"></div>
    <div class="ellipse malena" data-member="malena"></div>

    <!-- names positioned under ellipses -->
    <div class="nombre mica" id="name-mica">Franco Micaela</div>
    <div class="nombre simon" id="name-simon">Avila Boeri Simón</div>
    <div class="nombre malena" id="name-malena">Daniele Malena</div>
    <div class="nombre ignacio" id="name-ignacio">Andrade Ignacio Martin</div>
    <div class="nombre joaquin" id="name-joaquin">Favier Zakowicz Joaquín</div>
    <div class="nombre tomas" id="name-tomas">Centeno Angel Tomás</div>

    <div class="logo-unsl"></div>
    <div class="logo-fica"></div>

  <div class="footer"> <div id="footer-text" data-i18n="page3.footer">NASA SPACE APPS CHALLENGE 2025 - SAN LUIS, ARGENTINA</div></div>

  <button id="back-btn" class="BotonVisualizarSimulacion" data-i18n="volver_inicio" onclick="window.location.href='../index.html'">Volver a inicio</button>

    <script src="../i18n/loader.js"></script>
    <script>
      // populate texts from i18n (lightweight: replace headings and names)
      function updatePage3Texts() {
        const t = i18n.t;
    document.getElementById('page-title').innerText = t('page3.title') || 'Sobre Nosotros';
    document.getElementById('team-name').innerText = t('page3.team_name') || t('page3.teamName') || 'Equipo Mateorito';
    document.getElementById('team-desc').innerText = t('page3.team_description') || t('page3.description') || '';
    document.getElementById('footer-text').innerText = t('page3.footer') || 'NASA SPACE APPS CHALLENGE 2025 - SAN LUIS, ARGENTINA';

        const members = t('page3.members') || [];
        // mapping by visual id order used in style_3.css
        const idOrder = ['mica','simon','malena','ignacio','joaquin','tomas'];
        const filenameMap = {
          mica: '../IMG.mica.png',
          tomas: '../IMG.Tomas.png',
          joaquin: '../IMG.Joaquin.png',
          ignacio: '../IMG.Ignacio.png',
          simon: '../IMG.Simon.png',
          malena: '../IMG.Malena.png'
        };

        // tokens provided by user — use for robust matching (normalized, diacritics-insensitive)
        const surnameTokens = {
          mica: ['Micaela','Franco'],
          simon: ['Avila','Boeri','Simón'],
          malena: ['Daniele','Malena'],
          ignacio: ['Andrade','Ignacio','Martin'],
          joaquin: ['Favier','Zakowicz','Joaquin'],
          tomas: ['Centeno','Martin','Angel','Tomas']
        };

        const normalize = s => (s||'').normalize('NFD').replace(/\p{Diacritic}/gu,'').toLowerCase();
        const used = new Array(members.length).fill(false);

        idOrder.forEach((id, idx) => {
          // try to find a matching member by tokens
          let foundIdx = -1;
          for(let i=0;i<members.length;i++){
            if(used[i]) continue;
            const norm = normalize(members[i]);
            if(surnameTokens[id].some(tok => norm.includes(normalize(tok)))) { foundIdx = i; break; }
          }
          // fallback to position-based if not found
          if(foundIdx === -1) foundIdx = idx < members.length ? idx : members.findIndex((m, i) => !used[i]);
          if(foundIdx === -1) foundIdx = 0;
          used[foundIdx] = true;

          const fullName = members[foundIdx] || document.getElementById('name-' + id).textContent;
          const nameEl = document.getElementById('name-' + id);
          if(nameEl) nameEl.textContent = fullName;
          const ell = document.querySelector('.ellipse.' + id);
          if(ell) ell.style.backgroundImage = `url('${filenameMap[id]}')`;
        });
      }

      i18n.load().then(() => {
        updatePage3Texts();
      });


      // Detectar cambio de idioma y actualizar textos
      window.addEventListener('languageChanged', () => {
        updatePage3Texts();
      });

      document.getElementById('back-btn').addEventListener('click', () => {
        window.location.href = '../index.html';
      });
    </script>
  </body>
</html>
  </body>
</html>