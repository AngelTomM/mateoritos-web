<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Equipo Meteoritos - Sobre Nosotros" />
    <title>Sobre Nosotros - Equipo Meteoritos</title>
    <link rel="stylesheet" href="style_pagina3.css" />
  </head>
  <body>
    <section class="about-us-section">
      <div class="header-content">
        <div class="header-inner">
          <h1 id="page3-title">SOBRE NOSOTROS</h1>
        </div>
        <hr class="header-divider red">
        <hr class="header-divider white">
      </div>

      <div class="team-members" id="page3-members">
        <!-- member cards injected by i18n script -->
      </div>

      <!-- leave team-intro at the end as a subtitle section -->

      <div style="margin-top:16px;">
        <a href="../index.html" class="back-btn" style="display:inline-block;text-decoration:none;">
          <button id="page3-back-btn" style="padding:10px 14px;border-radius:8px;border:none;background:#fc3d21;color:white;cursor:pointer;">Volver al inicio</button>
        </a>
      </div>

      <div class="footer-logos">
        <div class="footer-left-logos">
          <img src="../UNSL.png" alt="UNSL" class="footer-logo-img">
          <img src="../FICA_logo.png" alt="FICA" class="footer-logo-img" style="margin-left:10px;">
        </div>
        <p class="footer-note" id="page3-footer">NASA SPACE APPS CHALLENGE 2025 - SAN LUIS, ARGENTINA</p>
      </div>

      <div class="team-intro">
        <h2 id="page3-team-name">Equipo Meteoritos</h2>
        <p id="page3-team-desc">Un equipo conformado por estudiantes de Ingeniería Mecatrónica de la Universidad Nacional de San Luis participando en el NASA Space Apps Challenge.</p>
      </div>
    </section>

    <script src="../i18n/loader.js"></script>
    <script>
      (async function(){
        await i18n.load();
        const d = i18n.t('page3');
  // fill texts
  document.getElementById('page3-title').textContent = d.title || document.getElementById('page3-title').textContent;
  document.getElementById('page3-team-name').textContent = d.team_name;
  document.getElementById('page3-team-desc').textContent = d.team_description;
  document.getElementById('page3-footer').textContent = d.footer;
  // back button text comes from root i18n 'back'
  const root = i18n.t();
  const backText = (root && root.back) ? root.back : 'Volver al inicio';
  const backBtn = document.getElementById('page3-back-btn'); if (backBtn) backBtn.textContent = backText;

        const membersCont = document.getElementById('page3-members');
        membersCont.innerHTML = '';

        function chooseImageFor(name){
          const n = (name||'').toLowerCase();
          if(n.includes('ignac') || n.includes('andrade')) return '../IMG.Ignacio.png';
          if(n.includes('joaquin') || n.includes('favier')) return '../IMG.Joaquin.png';
          if(n.includes('malena') || n.includes('daniele')) return '../IMG.Malena.png';
          if(n.includes('mica') || n.includes('fránco') || n.includes('franco')) return '../IMG.mica.png';
          if(n.includes('simon') || n.includes('ávila') || n.includes('avila')) return '../IMG.Simon.png';
          if(n.includes('tomas') || n.includes('centeno')) return '../IMG.Tomas.png';
          return '';
        }

        function makeImgWithFallback(basePaths){
          const img = document.createElement('img');
          let i = 0;
          img.alt = '';
          img.onerror = function(){
            i++;
            if(i < basePaths.length){
              img.src = basePaths[i];
            } else {
              // final fallback: remove broken image or set placeholder
              img.onerror = null;
              img.src = '';
              img.style.display = 'none';
            }
          };
          img.src = basePaths[0];
          return img;
        }

        (d.members||[]).forEach(name => {
          const candidateBase = (function(){
            // build candidate filenames based on common patterns
            // prefer the repository naming: IMG.Name.jpg
            const tokens = name.split(/\s+/).filter(Boolean);
            // try variants: Last token or First token depending
            const prefer = tokens.length ? tokens[tokens.length-1] : name;
            // normalize: remove diacritics for one variant
            const norm = prefer.normalize('NFD').replace(/\p{Diacritic}/gu, '');
            const variants = [prefer, norm, prefer.toLowerCase(), norm.toLowerCase(), prefer.toUpperCase()];
            const bases = [];
            variants.forEach(v => {
              if(!v) return;
              bases.push(`../IMG.${v}.png`);
              bases.push(`../IMG.${v}.jpg`);
            });
            // also try some explicit names used in repo (png preferred)
            bases.push('../IMG.Ignacio.png','../IMG.Joaquin.png','../IMG.Malena.png','../IMG.mica.png','../IMG.Simon.png','../IMG.Tomas.png');
            // remove duplicates
            return Array.from(new Set(bases));
          })();

          const photoDiv = document.createElement('div');
          photoDiv.className = 'member-photo';
          const imgEl = makeImgWithFallback(candidateBase);
          imgEl.alt = `Foto de ${name}`;
          photoDiv.appendChild(imgEl);

          const nameP = document.createElement('p');
          nameP.className = 'member-name';
          nameP.textContent = name;

          const card = document.createElement('div');
          card.className = 'member-card';
          card.appendChild(photoDiv);
          card.appendChild(nameP);
          membersCont.appendChild(card);
        });

        window.addEventListener('storage', async(ev)=>{
          if(ev.key === 'mateoritos_lang'){
            await i18n.load();
            const d2 = i18n.t('page3');
            document.getElementById('page3-title').textContent = d2.title;
            document.getElementById('page3-team-name').textContent = d2.team_name;
            document.getElementById('page3-team-desc').textContent = d2.team_description;
            document.getElementById('page3-footer').textContent = d2.footer;
            const root2 = i18n.t();
            const backText2 = (root2 && root2.back) ? root2.back : 'Volver al inicio';
            const backBtn2 = document.getElementById('page3-back-btn'); if (backBtn2) backBtn2.textContent = backText2;
            membersCont.innerHTML = '';
            (d2.members||[]).forEach(name => {
              const candidateBase = (function(){
                const tokens = name.split(/\s+/).filter(Boolean);
                const prefer = tokens.length ? tokens[tokens.length-1] : name;
                const norm = prefer.normalize('NFD').replace(/\p{Diacritic}/gu, '');
                const variants = [prefer, norm, prefer.toLowerCase(), norm.toLowerCase(), prefer.toUpperCase()];
                const bases = [];
                variants.forEach(v => {
                  if(!v) return;
                  bases.push(`../IMG.${v}.png`);
                  bases.push(`../IMG.${v}.jpg`);
                });
                bases.push('../IMG.Ignacio.png','../IMG.Joaquin.png','../IMG.Malena.png','../IMG.mica.png','../IMG.Simon.png','../IMG.Tomas.png');
                return Array.from(new Set(bases));
              })();
              const photoDiv = document.createElement('div');
              photoDiv.className = 'member-photo';
              const imgEl = makeImgWithFallback(candidateBase);
              imgEl.alt = `Foto de ${name}`;
              photoDiv.appendChild(imgEl);
              const nameP = document.createElement('p');
              nameP.className = 'member-name';
              nameP.textContent = name;
              const card = document.createElement('div');
              card.className = 'member-card';
              card.appendChild(photoDiv);
              card.appendChild(nameP);
              membersCont.appendChild(card);
            });
          }
        });
      })();
    </script>
  </body>
</html>